# ドメイン駆動設計入門 ボトムアップでわかる！ドメイン駆動設計の基本

### 2.3 値オブジェクトにする基準

- ドメインモデルとして挙げられている概念は、値オブジェクトにする。
- ドメインモデルとして挙げられていない概念は、値オブジェクトにするかどうかの正当性はコンテキストによる。
- 著者の基準は「そこにルールが存在しているか」と「それ単体で取り扱いたいか」
- 氏名の場合
  - 「姓と名で構成される」というルールがある
  - 単体で比較などをされる
- 値オブジェクトとして定義するほどの価値がある概念を実装中に発見した場合、それはドメインモデルとしてフィードバックすべき。
- これがドメイン駆動設計が目的とするイテレーティブな開発で、実装時の気付きにより支えられる。

### 2.4 ふるまいをもった値オブジェクト

- 値オブジェクトはデータを保持するコンテナではない
- 加算などのふるまいが定義されていることで、加算できるということがわかる
- ルール外のふるまいをしようとするとエラーを送出できる
  - 通貨単位が違う場合は例外となる
- 逆に定義されていないふるまいはできないという制約も可能

### 2.5 値オブジェクトを採用するモチベーション

- クラスを増やすことに抵抗を感じる開発者は多いため、値オブジェクトを採用するにはこの心理的ハードルを越える必要がある
- そのためのモチベーションを紹介
  - 表現力を増す
  - 不正な値を存在させない
    - 例外の送出処理をクラス内にまとめられる
  - 誤った代入を防ぐ
    - 自己文書化を進める（コードの正しさをコードで表現する）
    - UserIdにUserNameを代入できないようにする
  - ロジックの散在を防ぐ
    - ルールをクラス内に納められる

---
2023-04-24 : 51/341
